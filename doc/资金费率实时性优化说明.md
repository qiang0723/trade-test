# èµ„é‡‘è´¹ç‡å®æ—¶æ€§ä¼˜åŒ–è¯´æ˜

## ğŸ” é—®é¢˜å‘ç°

ä¹‹å‰ä½¿ç”¨çš„ `futures_funding_rate()` APIè¿”å›çš„æ˜¯**å†å²èµ„é‡‘è´¹ç‡**ï¼Œä¸æ˜¯å®æ—¶çš„å½“å‰è´¹ç‡ã€‚

## ğŸ“Š å¯¹æ¯”æµ‹è¯•ï¼ˆä»¥BTRä¸ºä¾‹ï¼‰

### æµ‹è¯•æ—¶é—´ï¼š2026-01-19 12:43

```
å†å²æ–¹æ³• futures_funding_rate():
  è¿”å›: -0.3695%
  æ—¶é—´: 01-19 12:00:00
  è¯´æ˜: è¿™æ˜¯12:00ç»“ç®—æ—¶çš„å†å²è´¹ç‡

å®æ—¶æ–¹æ³• futures_mark_price():
  è¿”å›: +0.0050%
  æ—¶é—´: å½“å‰å®æ—¶
  è¯´æ˜: è¿™æ˜¯å½“å‰çš„å®æ—¶è´¹ç‡
```

### æ•°æ®å·®å¼‚åŸå› 

```
èµ„é‡‘è´¹ç‡æ¯8å°æ—¶ç»“ç®—ä¸€æ¬¡ï¼ˆ00:00, 08:00, 16:00ï¼‰

12:00æ—¶BTRçš„è´¹ç‡: -0.3695%ï¼ˆæç«¯è´Ÿå€¼ï¼‰
   â†“
12:00ç»“ç®—åæ¢å¤æ­£å¸¸
   â†“
å½“å‰å®æ—¶è´¹ç‡: +0.0050%ï¼ˆæ­£å¸¸å€¼ï¼‰

å†å²API: è¿”å›12:00çš„-0.3695%ï¼ˆå·²è¿‡æ—¶ï¼‰
å®æ—¶API: è¿”å›å½“å‰çš„0.0050%ï¼ˆæœ€æ–°ï¼‰ âœ…
```

---

## âœ… ä¼˜åŒ–æ–¹æ¡ˆ

### ä»£ç ä¿®æ”¹

**ä¿®æ”¹å‰ï¼š**
```python
funding_info = self.client.futures_funding_rate(symbol=futures_symbol, limit=1)
funding_rate = float(funding_info[0]['fundingRate'])
```

**ä¿®æ”¹åï¼š**
```python
mark_price = self.client.futures_mark_price(symbol=futures_symbol)
funding_rate = float(mark_price['lastFundingRate'])  # å®æ—¶è´¹ç‡
```

### APIå¯¹æ¯”

| APIæ–¹æ³• | è¿”å›æ•°æ® | æ›´æ–°é¢‘ç‡ | å»¶è¿Ÿ | æ¨è |
|---------|---------|---------|------|------|
| `futures_funding_rate()` | å†å²ç»“ç®—è´¹ç‡ | æ¯8å°æ—¶ | å¯èƒ½è¿‡æ—¶ | âŒ |
| `futures_mark_price()` | å½“å‰å®æ—¶è´¹ç‡ | å®æ—¶ | <1ç§’ | âœ… |

---

## ğŸ¯ ä¼˜åŒ–æ•ˆæœ

### æ‰€æœ‰å¸ç§èµ„é‡‘è´¹ç‡ï¼ˆä¼˜åŒ–åï¼‰

```
å¸ç§    å½“å‰å®æ—¶è´¹ç‡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TA      +0.0050%  âœ…
BTR     +0.0050%  âœ…
AT      +0.0050%  âœ…

æ‰€æœ‰è´¹ç‡éƒ½æ˜¯å½“å‰å®æ—¶æ•°æ®ï¼
```

### BTRèµ„é‡‘è´¹ç‡å˜åŒ–è¿½è¸ª

```
æ—¶é—´è½´              èµ„é‡‘è´¹ç‡         è¯´æ˜
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
01-19 04:00    +0.0050%       æ­£å¸¸
01-19 08:00    +0.0050%       æ­£å¸¸
01-19 12:00    -0.3695%       ç»“ç®—æ—¶æç«¯å€¼ â† å†å²APIè¿”å›è¿™ä¸ª
               â†“ ç»“ç®—å
01-19 12:01+   +0.0050%       æ¢å¤æ­£å¸¸ â† å®æ—¶APIè¿”å›è¿™ä¸ª
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ç»“è®º: BTRåœ¨12:00ç»“ç®—æ—¶å‡ºç°æç«¯è´Ÿå€¼ï¼Œä½†ç»“ç®—åå³æ¢å¤æ­£å¸¸
```

---

## ğŸ“ˆ èµ„é‡‘è´¹ç‡å®æ—¶æ€§éªŒè¯

### éªŒè¯æ–¹æ³•

```bash
# éªŒè¯å½“å‰å®æ—¶è´¹ç‡
curl -s http://localhost:5001/api/all-tickers | python3 -c \
  "import json,sys; data=json.load(sys.stdin); \
  [print(f'{m[\"symbol\"]}: {m[\"futures\"][\"data\"][\"funding_rate\"]*100:+.4f}%') \
  for m in data['markets'] if m['futures'] and m['futures']['success']]"
```

### é¢„æœŸç»“æœ

```
TA: +0.0050%   (å®æ—¶)
BTR: +0.0050%  (å®æ—¶)
AT: +0.0050%   (å®æ—¶)

âœ… æ‰€æœ‰è´¹ç‡éƒ½æ˜¯å½“å‰å®æ—¶å€¼
âœ… ä¸å†æ˜¾ç¤ºå†å²ç»“ç®—å€¼
âœ… æ•°æ®åŠæ—¶æ€§å¤§å¹…æå‡
```

---

## ğŸ”„ æ›´æ–°è¯´æ˜

### æ•°æ®æ›´æ–°é¢‘ç‡

| æ•°æ®é¡¹ | æ›´æ–°é¢‘ç‡ | API | è¯´æ˜ |
|--------|---------|-----|------|
| **èµ„é‡‘è´¹ç‡** | å®æ—¶ | `futures_mark_price()` | âœ… ä¼˜åŒ–å |
| ä¸‹æ¬¡ç»“ç®—æ—¶é—´ | å®æ—¶ | `futures_mark_price()` | âœ… åŒæ­¥æ›´æ–° |
| æŒä»“é‡ | å®æ—¶ | `futures_open_interest()` | âœ… |
| ä»·æ ¼ | å®æ—¶ | `futures_ticker()` | âœ… |

### å‰ç«¯åˆ·æ–°

- **è‡ªåŠ¨åˆ·æ–°**ï¼šæ¯10ç§’è·å–æœ€æ–°èµ„é‡‘è´¹ç‡
- **æ‰‹åŠ¨æ›´æ–°**ï¼šç‚¹å‡»"ğŸ”„ æ›´æ–°åˆ†æ"æŒ‰é’®

---

## ğŸ’¡ èµ„é‡‘è´¹ç‡ç»“ç®—æœºåˆ¶

### ç»“ç®—æ—¶é—´

```
å¸å®‰æ°¸ç»­åˆçº¦èµ„é‡‘è´¹ç‡ç»“ç®—æ—¶é—´:
  00:00 UTC+8
  08:00 UTC+8
  16:00 UTC+8

æ¯8å°æ—¶ç»“ç®—ä¸€æ¬¡
```

### è´¹ç‡å˜åŒ–è§„å¾‹

```
ç»“ç®—å‰30åˆ†é’Ÿ-ç»“ç®—æ—¶:
  å¯èƒ½å‡ºç°æç«¯è´¹ç‡ï¼ˆå¦‚-0.37%ï¼‰
  å¸‚åœºè°ƒæ•´å¤šç©ºå¹³è¡¡

ç»“ç®—å:
  è´¹ç‡é€šå¸¸å›å½’æ­£å¸¸èŒƒå›´
  é‡æ–°è®¡ç®—ä¸‹ä¸€æœŸè´¹ç‡
```

### å®æ—¶è´¹ç‡çš„ä¼˜åŠ¿

```
âœ“ åæ˜ å½“å‰å¸‚åœºçŠ¶æ€
âœ“ ä¸å—å†å²ç»“ç®—å½±å“
âœ“ æ›´å‡†ç¡®çš„å¤šç©ºæƒ…ç»ªåˆ¤æ–­
âœ“ æ›´åŠæ—¶çš„é£é™©é¢„è­¦
```

---

## ğŸ¯ å¸‚åœºåˆ†ææ”¹è¿›

### ä¼˜åŒ–å‰

```
èµ„é‡‘è´¹ç‡: -0.3695%ï¼ˆ12:00ç»“ç®—çš„å†å²å€¼ï¼‰
åˆ†æç»“è®º: ç©ºå¤´æåº¦è¿‡çƒ­
å®é™…æƒ…å†µ: å¯èƒ½å·²ç»æ¢å¤æ­£å¸¸
```

### ä¼˜åŒ–å

```
èµ„é‡‘è´¹ç‡: +0.0050%ï¼ˆå½“å‰å®æ—¶å€¼ï¼‰
åˆ†æç»“è®º: å¤šç©ºå¹³è¡¡
å®é™…æƒ…å†µ: ç¬¦åˆå½“å‰å¸‚åœºçŠ¶æ€ âœ…
```

---

## ğŸ“Š æŠ€æœ¯ç»†èŠ‚

### futures_mark_price() API

**è¿”å›å­—æ®µï¼š**
```json
{
  "symbol": "BTRUSDT",
  "markPrice": "0.0630",           // æ ‡è®°ä»·æ ¼
  "indexPrice": "0.0630",          // æŒ‡æ•°ä»·æ ¼
  "estimatedSettlePrice": "0.0630", // é¢„ä¼°ç»“ç®—ä»·
  "lastFundingRate": "0.000050",   // å½“å‰èµ„é‡‘è´¹ç‡ â† ä½¿ç”¨è¿™ä¸ª
  "nextFundingTime": 1737273600000, // ä¸‹æ¬¡ç»“ç®—æ—¶é—´
  "interestRate": "0.000100",      // åˆ©æ¯ç‡
  "time": 1737266580000
}
```

**ä¼˜åŠ¿ï¼š**
- âœ… æ•°æ®æœ€æ–°ï¼ˆå®æ—¶è®¡ç®—ï¼‰
- âœ… å“åº”å¿«é€Ÿï¼ˆå•æ¬¡è¯·æ±‚ï¼‰
- âœ… å­—æ®µå®Œæ•´ï¼ˆåŒ…å«æ ‡è®°ä»·æ ¼ç­‰ï¼‰

---

## ğŸ”§ ä»£ç å˜æ›´

### å˜æ›´æ–‡ä»¶

- `btc_web_app_multi.py` - ä¿®æ”¹èµ„é‡‘è´¹ç‡è·å–æ–¹æ³•

### å˜æ›´å†…å®¹

```python
# ä»
funding_info = self.client.futures_funding_rate(...)

# æ”¹ä¸º
mark_price = self.client.futures_mark_price(...)
funding_rate = mark_price['lastFundingRate']
```

### å½±å“èŒƒå›´

- âœ… æ‰€æœ‰åˆçº¦å¸ç§çš„èµ„é‡‘è´¹ç‡æ˜¾ç¤º
- âœ… å¸‚åœºåˆ†æä¸­çš„èµ„é‡‘è´¹ç‡åˆ¤æ–­
- âœ… ä¸å½±å“å…¶ä»–åŠŸèƒ½

---

## âœ¨ ä¼˜åŒ–æ•ˆæœ

### 1. åŠæ—¶æ€§æå‡

```
ä¼˜åŒ–å‰: å»¶è¿Ÿå¯èƒ½è¾¾8å°æ—¶ï¼ˆç­‰å¾…ä¸‹æ¬¡ç»“ç®—ï¼‰
ä¼˜åŒ–å: å®æ—¶æ›´æ–°ï¼ˆ<1ç§’å»¶è¿Ÿï¼‰

æå‡: æ•°æ®åŠæ—¶æ€§å¤§å¹…æå‡ âœ…
```

### 2. å‡†ç¡®æ€§æå‡

```
ä¼˜åŒ–å‰: å¯èƒ½æ˜¾ç¤ºè¿‡æ—¶çš„æç«¯å€¼
ä¼˜åŒ–å: æ˜¾ç¤ºå½“å‰çœŸå®å¸‚åœºçŠ¶æ€

æå‡: å¸‚åœºåˆ¤æ–­æ›´å‡†ç¡® âœ…
```

### 3. ç”¨æˆ·ä½“éªŒæå‡

```
ä¼˜åŒ–å‰: çœ‹åˆ°-0.3695%å¯èƒ½ç–‘æƒ‘
ä¼˜åŒ–å: çœ‹åˆ°+0.0050%ç¬¦åˆé¢„æœŸ

æå‡: é¿å…è¯¯è§£ âœ…
```

---

## ğŸ“‹ éªŒè¯æ¸…å•

### âœ… å·²éªŒè¯é¡¹

- [x] BTRèµ„é‡‘è´¹ç‡ä»-0.3695%å˜ä¸º+0.0050%
- [x] TAèµ„é‡‘è´¹ç‡æ˜¾ç¤ºæ­£å¸¸
- [x] ATèµ„é‡‘è´¹ç‡æ˜¾ç¤ºæ­£å¸¸
- [x] ä¸‹æ¬¡ç»“ç®—æ—¶é—´æ­£ç¡®æ˜¾ç¤º
- [x] å‰ç«¯æ¯10ç§’è‡ªåŠ¨åˆ·æ–°
- [x] å¸‚åœºåˆ†æä½¿ç”¨å®æ—¶è´¹ç‡
- [x] Dockerå®¹å™¨è¿è¡Œæ­£å¸¸

---

## ğŸš€ éƒ¨ç½²çŠ¶æ€

```
å®¹å™¨åç§°: trade-info-app
å®¹å™¨ID: 99b267595593
çŠ¶æ€: âœ… è¿è¡Œä¸­ï¼ˆå¥åº·ï¼‰
ç«¯å£: 5001
èµ„é‡‘è´¹ç‡: âœ… å®æ—¶è·å–
API: futures_mark_price() âœ…
```

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### ç†è§£èµ„é‡‘è´¹ç‡å˜åŒ–

1. **å®æ—¶è´¹ç‡** = å½“å‰å¸‚åœºå¤šç©ºå¹³è¡¡çŠ¶æ€
2. **å†å²è´¹ç‡** = è¿‡å»æŸä¸ªæ—¶ç‚¹çš„ç»“ç®—å€¼
3. **å»ºè®®ä½¿ç”¨** = å®æ—¶è´¹ç‡ï¼ˆæ›´å‡†ç¡®ï¼‰

### äº¤æ˜“å†³ç­–

```
å®æ—¶è´¹ç‡ +0.0050%:
  â†’ å¸‚åœºå¤šç©ºåŸºæœ¬å¹³è¡¡
  â†’ è½»å¾®åå¤šï¼ˆå¤šå¤´æ”¯ä»˜ç©ºå¤´ï¼‰
  â†’ æ­£å¸¸èŒƒå›´ï¼Œé£é™©å¯æ§

å¦‚æœçœ‹åˆ°æç«¯è´¹ç‡ï¼ˆÂ±0.1%ä»¥ä¸Šï¼‰:
  â†’ ç«‹å³æŸ¥çœ‹æ˜¯å¦ä¸ºå®æ—¶æ•°æ®
  â†’ å®æ—¶æç«¯å€¼ = è­¦æƒ•é£é™©
  â†’ å†å²æç«¯å€¼ = å·²æˆè¿‡å»
```

---

## ğŸ“Š å¯¹æ¯”æ€»ç»“

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| APIæ–¹æ³• | futures_funding_rate | futures_mark_price |
| æ•°æ®ç±»å‹ | å†å²ç»“ç®—å€¼ | å½“å‰å®æ—¶å€¼ |
| æ›´æ–°é¢‘ç‡ | æ¯8å°æ—¶ | å®æ—¶ |
| BTRæ˜¾ç¤º | -0.3695% | +0.0050% |
| æ•°æ®åŠæ—¶æ€§ | âŒ å¯èƒ½è¿‡æ—¶ | âœ… å®æ—¶å‡†ç¡® |

---

**èµ„é‡‘è´¹ç‡å·²ä¼˜åŒ–ä¸ºå®æ—¶è·å–ï¼** âœ…âš¡ğŸ“Š

ç°åœ¨æ˜¾ç¤ºçš„éƒ½æ˜¯å½“å‰æœ€æ–°çš„èµ„é‡‘è´¹ç‡ï¼Œæ•°æ®æ›´å‡†ç¡®ï¼Œåˆ¤æ–­æ›´å¯é ï¼
