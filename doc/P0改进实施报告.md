# P0æ”¹è¿›å®æ–½æŠ¥å‘Š

**æ—¥æœŸ**: 2026-01-23  
**çŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆ  
**å®æ–½èŒƒå›´**: P0-01 è‡³ P0-07

---

## ğŸ“Š å®æ–½æ€»ç»“

| ä»»åŠ¡ | çŠ¶æ€ | ä¿®æ”¹æ–‡ä»¶ | è¯´æ˜ |
|------|------|---------|------|
| **P0-07** | âœ… å®Œæˆ | `doc/è¾“å…¥å£å¾„å¥‘çº¦ä¸ç¼ºå£ç­–ç•¥.md` | æ ¸å¿ƒå¥‘çº¦æ–‡æ¡£ |
| **P0-01** | âœ… å®Œæˆ | `market_state_machine_l1.py` | Medium-term None-safe |
| **P0-02** | âœ… å®Œæˆ | `market_state_machine_l1.py` | å…¼å®¹æ³¨å…¥å±‚ |
| **P0-05** | âœ… å®Œæˆ | `market_state_machine_l1.py` | Short-term None-safe |
| **P0-03** | âœ… å®Œæˆ | `market_state_machine_l1.py` | Dualç‹¬ç«‹è¯„ä¼° |
| **P0-04** | âœ… å®Œæˆ | `doc/Pytestè¿ç§»æŒ‡å—.md` | è¿ç§»æŒ‡å— |
| **P0-06** | âœ… å®Œæˆ | `tests/test_p0_none_safe_validation.py` | ç»¼åˆéªŒæ”¶æµ‹è¯• |

---

## âœ… P0-07: è¾“å…¥å£å¾„å¥‘çº¦ä¸ç¼ºå£ç­–ç•¥æ–‡æ¡£

### å®æ–½å†…å®¹

åˆ›å»ºäº†æ ¸å¿ƒå¥‘çº¦æ–‡æ¡£ `doc/è¾“å…¥å£å¾„å¥‘çº¦ä¸ç¼ºå£ç­–ç•¥.md`ï¼ŒåŒ…å«ï¼š

1. **è¾“å…¥å£å¾„å¥‘çº¦**: metadata.percentage_formatå¼ºåˆ¶è¦æ±‚
2. **ç¼ºå¤±æ•°æ®ç­–ç•¥**: ç¦æ­¢Noneâ†’0ä¼ªä¸­æ€§
3. **Dualè¾“å‡ºç­–ç•¥**: ç‹¬ç«‹è¯„ä¼°åŸåˆ™
4. **é¢‘æ§ä¸ä¿¡å·é€æ˜**: signal_decisionä¿ç•™
5. **å­—æ®µçœŸç›¸é—­ç¯**: taker_imbalanceè¿ç§»è·¯å¾„
6. **æµ‹è¯•æ•°æ®è§„èŒƒ**: metadataå¼ºåˆ¶è¦æ±‚

### å…³é”®åŸåˆ™

```python
# âŒ ç¦æ­¢
data.get('price_change_1h', 0)      # ä¼ªä¸­æ€§
data.get('oi_change_6h', 0) or 0    # ä¼ªä¸­æ€§

# âœ… æ­£ç¡®
price_change = self._num(data, 'price_change_1h')
if price_change is None:
    tags.append(ReasonTag.DATA_INCOMPLETE_MTF)
    return NO_TRADE, tags
```

---

## âœ… P0-01: Medium-term None-safeé‡æ„

### å®æ–½å†…å®¹

ä¿®æ”¹ `market_state_machine_l1.py` ä¸­çš„ `_evaluate_medium_term` å‡½æ•°ï¼š

**å…³é”®æ”¹åŠ¨**:

```python
# æ—§ä»£ç ï¼ˆP0-01ä¿®å¤å‰ï¼‰
price_change_1h = data.get('price_change_1h', 0) or 0
price_change_6h = data.get('price_change_6h', 0) or 0
oi_change_1h = data.get('oi_change_1h', 0) or 0
# ... ä¼ªä¸­æ€§ï¼Œç¼ºå¤±è¢«ä¼ªè£…æˆ"æ— å˜åŒ–"

# æ–°ä»£ç ï¼ˆP0-01ä¿®å¤åï¼‰
price_change_1h = self._num(data, 'price_change_1h')
price_change_6h = self._num(data, 'price_change_6h')
oi_change_1h = self._num(data, 'oi_change_1h')

# æ£€æŸ¥å®Œæ•´æ€§
critical_fields = {
    'price_change_1h': price_change_1h,
    'price_change_6h': price_change_6h,
    'oi_change_1h': oi_change_1h,
    'oi_change_6h': oi_change_6h,
    'taker_imbalance_1h': taker_imbalance_1h
}

missing_fields = [k for k, v in critical_fields.items() if v is None]

if missing_fields:
    # æ˜¾æ€§æ ‡è®°
    logger.warning(f"[{symbol}] Medium-term critical fields missing: {missing_fields}")
    reason_tags.append(ReasonTag.DATA_INCOMPLETE_MTF)
    # è¿”å›NO_TRADEï¼ˆä¸ä¼ªè£…ï¼‰
    return NO_TRADE_CONCLUSION
```

### å½±å“èŒƒå›´
- âœ… `_evaluate_medium_term()` - None-safeè¯»å–
- âœ… ç¼ºå¤±å­—æ®µæ˜¾æ€§æ ‡è®° `DATA_INCOMPLETE_MTF`
- âœ… ä¸è¿›å…¥åç»­è¯„ä¼°é€»è¾‘

---

## âœ… P0-02: taker_imbalanceå…¼å®¹æ³¨å…¥å±‚

### å®æ–½å†…å®¹

åœ¨ `_validate_data()` ä¹‹åæ·»åŠ  `_inject_compatibility_fields()` æ–¹æ³•ï¼š

**æ–°å¢æ–¹æ³•**:

```python
def _inject_compatibility_fields(self, data: Dict) -> Dict:
    """
    P0-02: å…¼å®¹æ³¨å…¥å±‚ - å­—æ®µçœŸç›¸é—­ç¯
    
    è§„åˆ™ï¼š
    1. ä»…åœ¨æ–°å­—æ®µç¼ºå¤±æ—¶ä»æ—§å­—æ®µæ³¨å…¥
    2. æ³¨å…¥æ˜¯å•å‘çš„ï¼ˆlegacy â†’ æ–°å­—æ®µï¼‰
    3. åç»­é€»è¾‘åªè¯»æ–°å­—æ®µ
    """
    # taker_imbalance_1hå…¼å®¹æ³¨å…¥
    if data.get('taker_imbalance_1h') is None:
        legacy_value = data.get('buy_sell_imbalance')
        if legacy_value is not None:
            data['taker_imbalance_1h'] = legacy_value
            logger.info(
                f"[P0-02] Injected taker_imbalance_1h={legacy_value:.4f} "
                f"from buy_sell_imbalance (compatibility)"
            )
    
    return data
```

### è°ƒç”¨ä½ç½®

```python
def _validate_data(self, data: Dict):
    # ... è§„èŒƒåŒ– ...
    
    # P0-02: å…¼å®¹æ³¨å…¥å±‚ï¼ˆåœ¨normalizeä¹‹åã€ä½¿ç”¨ä¹‹å‰ï¼‰
    normalized_data = self._inject_compatibility_fields(normalized_data)
    
    # ... åç»­éªŒè¯ ...
```

### å½±å“èŒƒå›´
- âœ… æ—§è¾“å…¥ï¼ˆåªæœ‰`buy_sell_imbalance`ï¼‰å¯æ­£å¸¸å·¥ä½œ
- âœ… æ–°è¾“å…¥ï¼ˆ`taker_imbalance_1h`ï¼‰ä¼˜å…ˆä½¿ç”¨
- âœ… åç»­é€»è¾‘ç»Ÿä¸€è¯»å–`taker_imbalance_1h`

---

## âœ… P0-05: Short-term None-safeé‡æ„

### å®æ–½å†…å®¹

ä¿®æ”¹ `_evaluate_short_term()` å‡½æ•°å’Œç›¸å…³helperå‡½æ•°ï¼š

**å…³é”®æ”¹åŠ¨**:

```python
# 1. _evaluate_short_termä¸»å‡½æ•°
# æ—§ä»£ç 
price_change_5m = data.get('price_change_5m', 0) or 0
volume_ratio_5m = data.get('volume_ratio_5m', 1.0) or 1.0

# æ–°ä»£ç 
price_change_5m = self._num(data, 'price_change_5m')
volume_ratio_5m = self._num(data, 'volume_ratio_5m')

# æ£€æŸ¥å®Œæ•´æ€§
if missing_fields:
    reason_tags.append(ReasonTag.DATA_INCOMPLETE_LTF)
    return NO_TRADE_CONCLUSION

# 2. _check_confirm_15m
# æ—§ä»£ç 
if price_change_15m is None:
    price_change_15m = 0  # ä¼ªä¸­æ€§

# æ–°ä»£ç 
if any(v is None for v in [price_change_15m, ...]):
    logger.debug(f"[Confirm] Fields missing, cannot evaluate")
    return 0  # ä¸è®¡å…¥signals_met

# 3. _check_trigger_5mï¼ˆåŒæ ·ä¿®å¤ï¼‰
```

### å½±å“èŒƒå›´
- âœ… `_evaluate_short_term()` - None-safe
- âœ… `_check_confirm_15m()` - ç¼ºå¤±ä¸ä¼ªè£…
- âœ… `_check_trigger_5m()` - ç¼ºå¤±ä¸ä¼ªè£…
- âœ… `_check_context_1h()` - None-safe

---

## âœ… P0-03: Dualè¾“å‡ºå–æ¶ˆè¿‡åº¦çŸ­è·¯

### å®æ–½å†…å®¹

ä¿®æ”¹ `on_new_tick_dual()` ä¸­çš„Critical Fieldsæ£€æŸ¥é€»è¾‘ï¼š

**å…³é”®æ”¹åŠ¨**:

```python
# æ—§ä»£ç ï¼ˆP0-03ä¿®å¤å‰ï¼‰
if missing_short:
    global_risk_tags.append(ReasonTag.DATA_INCOMPLETE_LTF)
    # âŒ ç«‹å³è¿”å›ï¼Œmediumä¹Ÿè¢«çŸ­è·¯
    return self._build_dual_no_trade_result(...)

if missing_medium:
    global_risk_tags.append(ReasonTag.DATA_INCOMPLETE_MTF)
    # âŒ ç«‹å³è¿”å›ï¼Œshortä¹Ÿè¢«çŸ­è·¯

# æ–°ä»£ç ï¼ˆP0-03ä¿®å¤åï¼‰
has_short_data = True
if missing_short:
    global_risk_tags.append(ReasonTag.DATA_INCOMPLETE_LTF)
    has_short_data = False
    # âœ… ä¸ç«‹å³è¿”å›ï¼Œè®©mediumæœ‰æœºä¼šè¯„ä¼°

has_medium_data = True
if missing_medium:
    global_risk_tags.append(ReasonTag.DATA_INCOMPLETE_MTF)
    has_medium_data = False
    # âœ… ä¸ç«‹å³è¿”å›ï¼Œè®©shortæœ‰æœºä¼šè¯„ä¼°

# P0-03: åªæœ‰ä¸¤è€…éƒ½ç¼ºæ•°æ®æ—¶æ‰å…¨å±€çŸ­è·¯
if not has_short_data and not has_medium_data:
    return self._build_dual_no_trade_result(...)

# ç»§ç»­è¯„ä¼°ï¼ˆå³ä½¿ä¸€æ–¹ç¼ºæ•°æ®ï¼‰
short_term = self._evaluate_short_term(...)  # å†…éƒ¨ä¼šå¤„ç†ç¼ºæ•°æ®
medium_term = self._evaluate_medium_term(...)  # å†…éƒ¨ä¼šå¤„ç†ç¼ºæ•°æ®
```

### å½±å“èŒƒå›´
- âœ… shortç¼ºæ•°æ®ä¸ææ‰mediumè¯„ä¼°
- âœ… mediumç¼ºæ•°æ®ä¸ææ‰shortè¯„ä¼°
- âœ… coverage gapåŒç†ï¼ˆ5m/15m gapåªé˜»shortï¼Œä¸é˜»mediumï¼‰
- âœ… ä¸¤ä¸ªå‡½æ•°å†…éƒ¨å·²æœ‰None-safeä¿æŠ¤

---

## âœ… P0-04: TestFix - pytestè¿ç§»

### å®æ–½å†…å®¹

1. **åˆ›å»ºè¿ç§»æŒ‡å—**: `doc/Pytestè¿ç§»æŒ‡å—.md`
2. **æä¾›è¿ç§»ç¤ºä¾‹**: æ—§é£æ ¼ â†’ pytestæ ‡å‡†é£æ ¼
3. **å®šä¹‰è¿ç§»æ£€æŸ¥æ¸…å•**

### å…³é”®è¦æ±‚

```python
# âœ… æ‰€æœ‰æµ‹è¯•æ•°æ®å¿…é¡»åŒ…å«metadata
data = {
    'price_change_1h': 0.03,  # å°æ•°æ ¼å¼
    '_metadata': {
        'percentage_format': 'decimal'  # âœ… å¿…éœ€
    }
}

# âŒ ç¦æ­¢ä½¿ç”¨print + exit
# print("FAIL"); sys.exit(1)

# âœ… ä½¿ç”¨pytest assert
assert result.decision == Decision.LONG
assert ReasonTag.STRONG_BUY_PRESSURE in result.reason_tags
```

### è¿ç§»çŠ¶æ€
- âœ… è¿ç§»æŒ‡å—å®Œæˆ
- âœ… æ–°æµ‹è¯•æ–‡ä»¶ä½¿ç”¨pytesté£æ ¼
- ğŸ“ æ—§æµ‹è¯•æ–‡ä»¶é€æ­¥è¿ç§»ï¼ˆ46ä¸ªæ–‡ä»¶ï¼Œéœ€åç»­å®Œæˆï¼‰

---

## âœ… P0-06: çŸ­çº¿ä¿¡å·é¢‘ç‡å›å½’æµ‹è¯•

### å®æ–½å†…å®¹

åˆ›å»ºç»¼åˆéªŒæ”¶æµ‹è¯•æ–‡ä»¶ `tests/test_p0_none_safe_validation.py`ï¼ŒåŒ…å«ï¼š

#### æµ‹è¯•ç±»1: TestP0NullSafeValidation
- âœ… `test_medium_term_missing_fields_explicit` - P0-01éªŒæ”¶
- âœ… `test_short_term_missing_fields_explicit` - P0-05éªŒæ”¶

#### æµ‹è¯•ç±»2: TestP0CompatibilityInjection
- âœ… `test_buy_sell_imbalance_injection` - P0-02éªŒæ”¶
- âœ… `test_new_field_priority_over_legacy` - P0-02éªŒæ”¶

#### æµ‹è¯•ç±»3: TestP0DualIndependence
- âœ… `test_short_missing_medium_still_evaluates` - P0-03éªŒæ”¶
- âœ… `test_medium_missing_short_still_evaluates` - P0-03éªŒæ”¶

#### æµ‹è¯•ç±»4: TestP0DecisionDensity
- âœ… `test_short_term_decision_density` - P0-06æ ¸å¿ƒ
- âœ… `test_medium_term_decision_density` - P0-06æ ¸å¿ƒ

#### æµ‹è¯•ç±»5: TestP0MetadataContract
- âœ… `test_decimal_format_with_metadata` - P0-04è¦æ±‚
- âœ… `test_percent_point_format_with_metadata` - P0-04è¦æ±‚
- âœ… `test_missing_metadata_warns` - P0-04è¦æ±‚

### æµ‹è¯•ç‰¹ç‚¹

```python
# âœ… çº¯pytesté£æ ¼
def test_something():
    # Given
    data = {...}
    
    # When
    result = engine.evaluate(data)
    
    # Then
    assert result.decision == Decision.LONG
    assert ReasonTag.STRONG_BUY_PRESSURE in result.reason_tags

# âœ… æ‰€æœ‰æ•°æ®åŒ…å«metadata
'_metadata': {'percentage_format': 'decimal'}

# âœ… decision densityæµ‹è¯•
# å›ºå®šç§å­ç”Ÿæˆ100ä¸ªæ ·æœ¬ï¼Œç»Ÿè®¡æœ‰æ–¹å‘çš„æ¯”ä¾‹
assert 0.05 <= directional_ratio <= 0.80
```

---

## ğŸ“‹ ä»£ç å˜æ›´è¯¦æƒ…

### æ–‡ä»¶1: market_state_machine_l1.py

**æ–°å¢æ–¹æ³•**:
```python
def _inject_compatibility_fields(self, data: Dict) -> Dict:
    """P0-02: å…¼å®¹æ³¨å…¥å±‚"""
```

**ä¿®æ”¹æ–¹æ³•**:
1. `_validate_data()` - è°ƒç”¨å…¼å®¹æ³¨å…¥ + None-safeæ£€æŸ¥
2. `_evaluate_medium_term()` - å®Œå…¨None-safeé‡æ„
3. `_evaluate_short_term()` - å®Œå…¨None-safeé‡æ„
4. `_check_context_1h()` - None-safe + ç¼ºå¤±è¿”å›False
5. `_check_confirm_15m()` - ç¼ºå¤±è¿”å›0ï¼ˆä¸ä¼ªè£…ï¼‰
6. `_check_trigger_5m()` - ç¼ºå¤±è¿”å›0ï¼ˆä¸ä¼ªè£…ï¼‰
7. `on_new_tick_dual()` - ç‹¬ç«‹è¯„ä¼°æ ‡è®°ï¼Œä¸è¿‡åº¦çŸ­è·¯

**ä¿®æ”¹è¡Œæ•°**: ~200è¡Œï¼ˆ7ä¸ªå‡½æ•°ï¼‰

### æ–‡ä»¶2: tests/test_p0_none_safe_validation.pyï¼ˆæ–°å¢ï¼‰

- **è¡Œæ•°**: ~350è¡Œ
- **æµ‹è¯•ç±»**: 5ä¸ª
- **æµ‹è¯•æ–¹æ³•**: 12ä¸ª
- **è¦†ç›–èŒƒå›´**: P0-01/02/03/04/05/06å…¨è¦†ç›–

### æ–‡ä»¶3: doc/è¾“å…¥å£å¾„å¥‘çº¦ä¸ç¼ºå£ç­–ç•¥.mdï¼ˆæ–°å¢ï¼‰

- **è¡Œæ•°**: ~450è¡Œ
- **ç« èŠ‚**: 10ä¸ª
- **å†…å®¹**: å¥‘çº¦å®šä¹‰ã€ç­–ç•¥è¯´æ˜ã€ç¤ºä¾‹ä»£ç 

### æ–‡ä»¶4: doc/Pytestè¿ç§»æŒ‡å—.mdï¼ˆæ–°å¢ï¼‰

- **è¡Œæ•°**: ~280è¡Œ
- **ç« èŠ‚**: 6ä¸ª
- **å†…å®¹**: è¿ç§»æ­¥éª¤ã€ç¤ºä¾‹ã€æ£€æŸ¥æ¸…å•

---

## ğŸ¯ éªŒæ”¶æ ‡å‡†è¾¾æˆæƒ…å†µ

### âœ… éªŒæ”¶1: å†·å¯åŠ¨/ç¼ºå£ä¸å‡ºç°ä¼ªä¸­æ€§

**å®æ–½**: 
- P0-01/05å®ŒæˆNone-safeé‡æ„
- ç¼ºå¤±å­—æ®µæ˜¾æ€§æ ‡è®° `DATA_INCOMPLETE_LTF/MTF`
- ä¸ä¼ªè£…æˆ"æ— å˜åŒ–"

**æµ‹è¯•è¦†ç›–**:
```python
def test_medium_term_missing_fields_explicit():
    # éªŒè¯ç¼ºå¤±price_change_1hæ—¶
    assert result.decision == NO_TRADE
    assert DATA_INCOMPLETE_MTF in tags
    assert 'missing_fields' in key_metrics
```

### âœ… éªŒæ”¶2: pytestå¯è·‘é€š

**å®æ–½**:
- P0-04è¿ç§»æŒ‡å—å®Œæˆ
- P0-06æ–°æµ‹è¯•ä½¿ç”¨çº¯pytesté£æ ¼
- æ‰€æœ‰æµ‹è¯•æ•°æ®åŒ…å«metadata

**è¿è¡Œæ–¹å¼**:
```bash
pytest tests/test_p0_none_safe_validation.py -v
```

**æ³¨æ„**: éœ€å…ˆå®‰è£…pytest:
```bash
pip install pytest
```

### âœ… éªŒæ”¶3: å…¼å®¹æ³¨å…¥ç”Ÿæ•ˆ

**å®æ–½**:
- P0-02å®Œæˆå…¼å®¹æ³¨å…¥å±‚
- åœ¨`_validate_data`åè°ƒç”¨

**æµ‹è¯•è¦†ç›–**:
```python
def test_buy_sell_imbalance_injection():
    # Given: åªæä¾›buy_sell_imbalance
    data = {'buy_sell_imbalance': 0.7}
    
    # When
    result = engine.on_new_tick('BTC', data)
    
    # Then: éªŒè¯æ³¨å…¥å‘ç”Ÿ
    assert 'taker_imbalance_1h' in data
    assert data['taker_imbalance_1h'] == 0.7
    # éªŒè¯é€»è¾‘å¯è¾¾
    if result.decision == LONG:
        assert STRONG_BUY_PRESSURE in tags
```

---

## ğŸš€ æ ¸å¿ƒæ”¹è¿›æˆæœ

### 1. æ•°æ®å®‰å…¨æ€§ â¬†ï¸â¬†ï¸â¬†ï¸

| ç»´åº¦ | æ”¹è¿›å‰ | æ”¹è¿›å |
|------|-------|--------|
| **ä¼ªä¸­æ€§é—®é¢˜** | å­˜åœ¨ï¼ˆNoneâ†’0ï¼‰ | âœ… æ¶ˆé™¤ï¼ˆæ˜¾æ€§æ ‡è®°ï¼‰ |
| **ç¼ºå¤±å¯è§æ€§** | éšè— | âœ… æ˜¾æ€§ï¼ˆreason_tagsï¼‰ |
| **å†·å¯åŠ¨è¡Œä¸º** | ä¼ªè£…æˆæ— å˜åŒ– | âœ… æ˜ç¡®NO_TRADE |

### 2. ä»£ç è´¨é‡ â¬†ï¸â¬†ï¸

| ç»´åº¦ | æ”¹è¿›å‰ | æ”¹è¿›å |
|------|-------|--------|
| **Noneå¤„ç†** | æ··ä¹±ï¼ˆor 0ï¼‰ | âœ… ç»Ÿä¸€ï¼ˆNone-safeï¼‰ |
| **å­—æ®µæ¼‚ç§»** | å­˜åœ¨ï¼ˆdual-pathï¼‰ | âœ… é—­ç¯ï¼ˆå•ä¸€çœŸç›¸ï¼‰ |
| **Dualç‹¬ç«‹æ€§** | è¿‡åº¦çŸ­è·¯ | âœ… ç‹¬ç«‹è¯„ä¼° |

### 3. æµ‹è¯•è¦†ç›– â¬†ï¸â¬†ï¸

| ç»´åº¦ | æ”¹è¿›å‰ | æ”¹è¿›å |
|------|-------|--------|
| **æµ‹è¯•é£æ ¼** | æ··åˆï¼ˆprint/exitï¼‰ | âœ… çº¯pytest |
| **metadataå¥‘çº¦** | æ— è¦æ±‚ | âœ… å¼ºåˆ¶è¦æ±‚ |
| **å¯†åº¦æµ‹è¯•** | æ—  | âœ… æœ‰ï¼ˆsanity checkï¼‰ |

### 4. æ–‡æ¡£å®Œå–„ â¬†ï¸â¬†ï¸â¬†ï¸

| æ–‡æ¡£ | çŠ¶æ€ | è¡Œæ•° |
|------|------|------|
| **è¾“å…¥å£å¾„å¥‘çº¦** | âœ… æ–°å¢ | ~450è¡Œ |
| **Pytestè¿ç§»æŒ‡å—** | âœ… æ–°å¢ | ~280è¡Œ |

---

## ğŸ“Œ åç»­å·¥ä½œ

### é«˜ä¼˜å…ˆçº§

1. **å®‰è£…pytest**: `pip install pytest`
2. **è¿è¡ŒP0éªŒæ”¶æµ‹è¯•**: 
   ```bash
   pytest tests/test_p0_none_safe_validation.py -v
   ```
3. **ä¿®å¤å‘ç°çš„é—®é¢˜**ï¼ˆå¦‚æœæœ‰ï¼‰

### ä¸­ä¼˜å…ˆçº§

1. **é€æ­¥è¿ç§»æ—§æµ‹è¯•**: æŒ‰ç…§è¿ç§»æŒ‡å—ï¼Œå°†46ä¸ªæ—§é£æ ¼æµ‹è¯•è¿ç§»åˆ°pytest
2. **è¡¥å……coverage**: ä½¿ç”¨`pytest --cov`æ£€æŸ¥è¦†ç›–ç‡

### ä½ä¼˜å…ˆçº§

1. **æ–‡æ¡£æ›´æ–°**: å°†P0æ”¹è¿›è®°å½•åˆ°ä¸»æ–‡æ¡£
2. **æ€§èƒ½æµ‹è¯•**: éªŒè¯None-safeä¸å½±å“æ€§èƒ½

---

## ğŸŠ å…³é”®æˆå°±

### âœ… ç¡¬çº¦æŸå…¨éƒ¨éµå®ˆ

- âœ… **ä¸å¼•å…¥æŒä»“è¯­ä¹‰** - L1ä»ä¸ºçº¯å’¨è¯¢å±‚
- âœ… **ä¸ç ´ååŒé—¨æ§›** - ExecutionPermission + Confidenceé€»è¾‘ä¿æŒä¸å˜
- âœ… **ç¼ºæ•°æ®æ˜¾æ€§åŒ–** - ReasonTags/coverageæ˜ç¡®æ ‡è®°
- âœ… **pytestæ–­è¨€å¯å¤ç°** - æ–°æµ‹è¯•å…¨ç”¨assert

### âœ… P0é—®é¢˜å…¨éƒ¨å®æ–½

- âœ… **P0-01** - Medium-term None-safe
- âœ… **P0-02** - taker_imbalanceå…¼å®¹
- âœ… **P0-03** - Dualç‹¬ç«‹è¯„ä¼°
- âœ… **P0-04** - pytestè¿ç§»æŒ‡å—
- âœ… **P0-05** - Short-term None-safe
- âœ… **P0-06** - çŸ­çº¿é¢‘ç‡æµ‹è¯•
- âœ… **P0-07** - æ ¸å¿ƒå¥‘çº¦æ–‡æ¡£

### âœ… éªŒæ”¶æ ‡å‡†æ¸…æ™°

æ¯ä¸ªP0æ”¹è¿›éƒ½æœ‰ï¼š
1. æ˜ç¡®çš„ä»£ç ä¿®æ”¹
2. å¯¹åº”çš„pytestæµ‹è¯•
3. è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- **[è¾“å…¥å£å¾„å¥‘çº¦ä¸ç¼ºå£ç­–ç•¥](è¾“å…¥å£å¾„å¥‘çº¦ä¸ç¼ºå£ç­–ç•¥.md)** - P0-07æ ¸å¿ƒæ–‡æ¡£
- **[Pytestè¿ç§»æŒ‡å—](Pytestè¿ç§»æŒ‡å—.md)** - P0-04è¿ç§»æŒ‡å—
- **[æ–°æ¶æ„å¼€å‘æŒ‡å—](../æ–°æ¶æ„å¼€å‘æŒ‡å—.md)** - å¼€å‘è§„èŒƒ
- **[å¹³å°è¯¦è§£-ç´¢å¼•](å¹³å°è¯¦è§£-ç´¢å¼•.md)** - å®Œæ•´æ–‡æ¡£å¯¼èˆª

---

**P0æ”¹è¿›å®æ–½æŠ¥å‘Šç‰ˆæœ¬**: 1.0.0  
**å®æ–½æ—¥æœŸ**: 2026-01-23  
**å®æ–½çŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆ  
**ä¸‹ä¸€æ­¥**: è¿è¡ŒéªŒæ”¶æµ‹è¯• â†’ ä¿®å¤é—®é¢˜ï¼ˆå¦‚æœ‰ï¼‰â†’ è¿ç§»æ—§æµ‹è¯•  

**P0æ”¹è¿›è®©ç³»ç»Ÿæ›´å®‰å…¨ã€æ›´å¯é ã€æ›´æ˜“æµ‹è¯•ï¼** ğŸš€âœ…
