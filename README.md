# 加密货币多币种行情监控系统

这是一个功能完整的加密货币行情监控和分析系统，支持多币种、多市场（现货+合约）的实时数据监控和智能分析。

## 🌟 核心功能

### 📊 实时行情监控
- ✅ 支持TA、BTR、AT等多个币种
- ✅ 现货和合约双市场支持
- ✅ 实时价格（4位小数精度）
- ✅ 24小时涨跌统计
- ✅ 成交量/成交额（6小时变化）
- ✅ 资金费率（合约专属）
- ✅ 持仓量监控（6小时变化）

### 📈 综合K线图表
- ✅ 价格K线（蓝色）
- ✅ 成交量柱状图（绿色）
- ✅ 成交额趋势（橙色）
- ✅ 持仓量趋势（紫色，仅合约）
- ✅ 四种时间间隔（15m/1h/4h/1d）
- ✅ 所有数据整合在一张图

### 🎯 智能市场分析
- ✅ 1小时买卖量分析（短期信号）
- ✅ 6小时持仓量变化（中期趋势）
- ✅ 资金费率分析（市场情绪）
- ✅ 综合多维度判断
- ✅ 自动生成操作建议
- ✅ 风险等级评估

### 🐋 大单分析
- ✅ 7个时间维度（1-12小时）
- ✅ 3个金额阈值（1K/5K/10K USDT）
- ✅ 买卖大单统计
- ✅ 资金流向分析

### 💹 成交统计
- ✅ 4个时间维度（1min/5min/30min/2h）
- ✅ 买卖力量可视化
- ✅ 成交量和金额统计
- ✅ 实时买卖比例

### 🔔 价格监控报警
- ✅ 1分钟内涨跌幅超过±5%自动报警
- ✅ 邮件报警（可配置）
- ✅ 控制台日志输出
- ✅ 5分钟冷却机制

### 🐳 Docker支持
- ✅ 一键构建镜像
- ✅ 容器化部署
- ✅ 自动重启
- ✅ 数据持久化

## 🚀 快速开始

### 方式一：Docker运行（推荐）

```bash
# 构建镜像
docker build -t trade-info:latest .

# 运行容器
docker run -d --name trade-info-app -p 5001:5001 \
  -v "$(pwd)/btc_market_data:/app/btc_market_data" \
  -e TZ=Asia/Shanghai \
  --restart unless-stopped \
  trade-info:latest

# 访问应用
open http://localhost:5001
```

或使用便捷脚本：
```bash
./docker-build.sh
./docker-run.sh
```

### 方式二：Python直接运行

```bash
# 创建虚拟环境
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate

# 安装依赖
pip install -r requirements.txt

# 运行应用
python3 btc_web_app_multi.py
```

访问：**http://localhost:5001**

## 📊 功能特性详解

### 1. 多币种支持

| 币种 | 现货 | 合约 |
|------|------|------|
| TA | ❌ | ✅ |
| BTR | ❌ | ✅ |
| AT | ✅ | ✅ |

### 2. 数据精度

- 价格：4位小数
- 成交量：6位小数
- 百分比：2位小数
- 时间：精确到秒

### 3. 变化周期

- **持仓量变化**：6小时
- **成交量变化**：6小时（前3h vs 后3h）
- **成交额变化**：6小时（前3h vs 后3h）
- **价格变化**：24小时
- **买卖力量**：1小时

### 4. 市场分析维度

```
短期（1小时）
  ├─ 买卖力量对比
  ├─ 主动买卖统计
  └─ 短期入场信号

中期（6小时）
  ├─ 持仓量变化
  ├─ 成交量变化
  └─ 趋势确认

长期（24小时）
  ├─ 价格趋势
  ├─ 资金费率
  └─ 大方向判断
```

## 🎨 界面预览

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 市场分析  BTR/USDT  [🔄 更新分析]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌──────────┬──────────┬────────────────┐
│市场情绪   │风险等级   │1h买卖力量       │
│看跌 🔴   │高 🔴    │████░░░░░░     │
└──────────┴──────────┴────────────────┘

💡 空头强势打压，短期看跌

📋 详细分析
• 1h卖出力量占优 84.2%
• 6h持仓量大幅减少 -14.05%
• 资金费率 -0.3695%（空头过热）
• 24h大幅下跌 -8.88%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 📦 项目结构

```
trade-info/
├── btc_web_app_multi.py      # 主应用（多币种Web）
├── btc_market_*.py            # 市场数据获取模块
├── templates/                 # HTML模板
│   └── index_multi.html       # 主页面
├── static/                    # 静态资源
│   ├── css/style_multi.css    # 样式表
│   └── js/app_multi.js        # 前端逻辑
├── Dockerfile                 # Docker镜像配置
├── docker-compose.yml         # Docker编排
├── requirements.txt           # Python依赖
└── 说明文档/                   # 详细文档
```

## 🔧 配置说明

### 邮件报警配置（可选）

编辑 `btc_web_app_multi.py`，配置邮件密码：

```python
class EmailAlert:
    def __init__(self):
        self.sender_email = 'johntmp2026@outlook.com'
        self.sender_password = ''  # 填入Outlook应用密码
        self.receiver_email = 'johntmp2026@outlook.com'
```

详见：`邮件报警配置说明.md`

## 📚 文档

- `快速开始.md` - 快速上手指南
- `Docker使用说明.md` - Docker部署详解
- `数据更新机制说明.md` - 数据更新机制
- `1小时买卖量分析说明.md` - 买卖量分析
- `6小时变化计算说明.md` - 变化计算方法
- `BTR持仓量计算详解.md` - 持仓量计算
- `邮件报警配置说明.md` - 报警配置

## 🎯 使用场景

1. **实时监控**：多币种价格实时跟踪
2. **短线交易**：1小时买卖力量判断入场时机
3. **趋势分析**：6小时数据确认趋势方向
4. **风险控制**：资金费率和持仓量预警
5. **大单追踪**：捕捉主力资金动向

## ⚠️ 注意事项

1. **网络要求**：需要访问币安API
2. **数据来源**：币安官方API，数据准确
3. **仅供参考**：不构成投资建议
4. **风险提示**：加密货币投资有风险

## 📞 联系方式

- GitHub: [@qiang0723](https://github.com/qiang0723)
- 项目地址: https://github.com/qiang0723/trade-test

## 📄 许可证

MIT License

---

**免责声明**：本工具仅用于学习和研究目的。加密货币投资有风险，请谨慎决策。
