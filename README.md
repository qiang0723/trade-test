# BTC 行情数据获取工具

这个项目包含了获取比特币(BTC)实时行情和交易数据的Python脚本。

## 📋 功能特性

- ✅ 获取BTC实时价格
- ✅ 获取24小时行情统计（最高价、最低价、涨跌幅等）
- ✅ 获取订单深度（买卖盘数据）
- ✅ 获取最近成交记录
- ✅ 获取K线数据（支持多种时间间隔）
- ✅ 完整市场数据报告

## 📦 文件说明

### 1. `btc_market_simple.py` - 简化版（推荐）
直接运行即可获取完整的BTC市场数据报告，无需任何交互。

**特点：**
- 一键运行，自动获取所有数据
- 美观的输出格式，带emoji图标
- 包含小时K线和日K线数据
- 适合快速查看市场行情

### 2. `btc_market_data.py` - 交互版
提供菜单选项，可以选择性获取不同类型的数据。

**特点：**
- 交互式菜单
- 可自定义参数（如K线时间间隔、数据数量等）
- 适合深入分析特定数据

### 3. `btc_market_export.py` - 数据导出版（推荐用于数据分析）
获取BTC市场数据并导出为JSON和CSV文件，方便后续分析。

**特点：**
- 自动导出JSON和CSV两种格式
- CSV文件可用Excel直接打开
- 数据分类保存（24小时统计、订单深度、成交记录、K线等）
- 带时间戳的文件名，方便管理历史数据

### 4. `btc_web_app.py` - Web应用版（🌟 强烈推荐）
在浏览器中查看实时行情，带图表和自动刷新。

**特点：**
- 美观的Web界面，紫色渐变设计
- 实时K线图表，支持多种时间间隔
- 自动刷新，每10秒更新数据
- 支持移动端访问
- 订单深度和最近成交实时显示
- 多币种行情对比

### 5. `schedule_order (1).py` - 币安交易策略
原有的币安合约交易策略脚本，支持限价单自动下单。

## 🚀 快速开始

### 1. 安装依赖

首先创建虚拟环境并安装依赖：

```bash
# 创建虚拟环境
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate  # macOS/Linux
# 或
venv\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt
```

### 2. 运行脚本

#### 方式一：运行简化版（推荐）

```bash
source venv/bin/activate
python3 btc_market_simple.py
```

#### 方式二：运行数据导出版（推荐用于数据分析）

```bash
source venv/bin/activate
python3 btc_market_export.py
```

数据将自动保存到 `btc_market_data/` 目录，包含：
- JSON格式：完整的市场数据
- CSV格式：
  - `btc_ticker_24h_*.csv` - 24小时统计
  - `btc_orderbook_bids_*.csv` - 买单深度
  - `btc_orderbook_asks_*.csv` - 卖单深度
  - `btc_recent_trades_*.csv` - 最近成交
  - `btc_klines_1h_*.csv` - 1小时K线
  - `btc_klines_1d_*.csv` - 日线K线

#### 方式三：启动Web应用（🌟 强烈推荐）

```bash
source venv/bin/activate
python3 btc_web_app.py
```

然后在浏览器中访问：**http://localhost:5000**

**效果：**
- 🎨 美观的Web界面
- 📊 实时K线图表
- 🔄 自动刷新数据（每10秒）
- 📱 支持手机访问
- 📈 多币种对比
- 💹 订单深度和成交记录

#### 方式四：运行交互版

```bash
source venv/bin/activate
python3 btc_market_data.py
```

然后按照菜单提示选择功能：
- 1 - 获取当前价格
- 2 - 获取24小时行情统计
- 3 - 获取订单深度
- 4 - 获取最近成交记录
- 5 - 获取K线数据
- 6 - 获取完整市场报告
- 0 - 退出

## 📊 数据说明

### 当前价格
显示BTC/USDT的实时价格。

### 24小时行情统计
包含：
- 当前价格
- 24小时最高价/最低价
- 24小时涨跌幅和涨跌额
- 24小时成交量和成交额
- 开盘价和加权平均价

### 订单深度
显示买卖盘前N档的价格和数量：
- 🔴 卖单（Ask）：挂单卖出的价格和数量
- 🟢 买单（Bid）：挂单买入的价格和数量

### 最近成交
显示最近N笔成交记录，包括：
- 成交时间
- 成交价格
- 成交数量
- 成交方向（买入/卖出）

### K线数据
支持多种时间间隔：
- `1m` - 1分钟
- `5m` - 5分钟
- `15m` - 15分钟
- `1h` - 1小时
- `4h` - 4小时
- `1d` - 1天
- `1w` - 1周
- `1M` - 1月

每根K线包含：
- 开盘价
- 最高价
- 最低价
- 收盘价
- 成交量

## 🔑 API说明

本工具使用币安(Binance)的公开API获取市场数据，**不需要API密钥**即可使用。

如果需要进行交易操作（如`schedule_order (1).py`），则需要：
1. 在币安注册账号
2. 创建API密钥
3. 在配置文件中填入API密钥和密钥

## 📝 依赖包

- `python-binance` - 币安Python SDK
- `pandas` - 数据处理
- `requests` - HTTP请求

详见 `requirements.txt`

## ⚠️ 注意事项

1. **网络要求**：需要能够访问币安API（api.binance.com）
2. **数据延迟**：市场数据可能有轻微延迟
3. **API限制**：币安API有请求频率限制，请勿过于频繁调用
4. **仅供参考**：本工具提供的数据仅供参考，不构成投资建议

## 🛠️ 自定义使用

你可以在代码中修改以下参数：

```python
# 修改交易对
self.symbol = "ETHUSDT"  # 改为以太坊

# 修改K线时间间隔
btc.get_klines(interval='5m', limit=24)  # 5分钟K线

# 修改订单深度档位
btc.get_orderbook(limit=10)  # 显示10档

# 修改成交记录数量
btc.get_recent_trades(limit=50)  # 显示50笔
```

## 📈 示例输出

```
============================================================
💰 BTC 当前价格: $95,224.99 USDT
============================================================

============================================================
📊 BTC 24小时行情数据
============================================================
当前价格:       $      95,224.98
24h最高价:      $      95,809.08
24h最低价:      $      94,293.46
24h涨跌幅:      📉          -0.47%
24h涨跌额:      $        -444.73
24h成交量:             8,238.26 BTC
24h成交额:      $ 783,801,238.57
============================================================
```

## 📞 联系方式

如有问题或建议，欢迎提Issue或PR。

## 📄 许可证

MIT License

---

**免责声明**：本工具仅用于学习和研究目的。加密货币投资有风险，请谨慎决策。
